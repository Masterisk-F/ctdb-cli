#!/bin/bash
set -e

PREFIX="/usr/local"

usage() {
    echo "Usage: ./configure [OPTIONS]"
    echo "Options:"
    echo "  --prefix=PREFIX         Install files in PREFIX [$PREFIX]"
    echo "  --help                  Display this help and exit"
}

while [ $# -gt 0 ]; do
    case "$1" in
        --prefix=*)
            PREFIX="${1#*=}"
            ;;
        --help)
            usage
            exit 0
            ;;
        *)
            echo "Unknown option: $1"
            usage
            exit 1
            ;;
    esac
    shift
done

echo "Generating config.mk..."
cat << EOF > config.mk
PREFIX = $PREFIX
EOF

echo "Configuration complete. Run 'make' to build."
